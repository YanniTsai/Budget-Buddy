"use strict";(self["webpackChunkbudget_buddy"]=self["webpackChunkbudget_buddy"]||[]).push([[733],{9733:function(e,t,d){d.r(t),d.d(t,{default:function(){return we}});var n=d(3396),a=d(9242),s=d(7139);const l={class:"w-100 d-flex justify-content-center align-items-center"},i={class:"col-6"},o=(0,n._)("div",null,"帳戶",-1),c={class:"d-flex justify-content-between align-items-center"},u={class:""},r=["data-bs-target"],p=(0,n._)("i",{class:"bi bi-chevron-down"},null,-1),m=[p],b=["id"],h=(0,n._)("hr",null,null,-1),f={class:"d-flex justify-content-between"},_=(0,n._)("div",null,"帳戶內容：",-1),w={class:"d-flex flex-column justify-content-around"},g=["onClick"],y=(0,n._)("i",{class:"bi bi-pencil"},null,-1),v=[y],F=["onClick"],M=(0,n._)("i",{class:"bi bi-ban"},null,-1),D=[M],k=(0,n._)("div",null,"信用卡",-1),C={class:"d-flex justify-content-between align-items-center"},$={class:""},x=["data-bs-target"],I=(0,n._)("i",{class:"bi bi-chevron-down"},null,-1),j=[I],z=["id"],L=(0,n._)("hr",null,null,-1),N={class:"d-flex justify-content-between"},U=(0,n._)("div",null,"信用卡內容：",-1),H={class:"d-flex flex-column justify-content-around"},V=["onClick"],W=(0,n._)("i",{class:"bi bi-pencil"},null,-1),Y=[W],Z=["onClick"],K=(0,n._)("i",{class:"bi bi-ban"},null,-1),q=[K];function A(e,t,d,p,y,M){const I=(0,n.up)("Loading"),W=(0,n.up)("FundModal"),K=(0,n.up)("DeleteModal");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(I,{active:y.isLoading,style:{"z-index":"9999"}},null,8,["active"]),(0,n._)("div",l,[(0,n._)("div",i,[(0,n._)("button",{class:"btn textblue-btn mb-3",onClick:t[0]||(t[0]=(0,a.iM)((e=>M.openModal(!0)),["prevent"]))},"新增帳戶"),o,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(y.funds,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"m-3 p-3 fund-info",key:"fund"+e._id},[(0,n._)("div",c,[(0,n._)("div",u,[(0,n._)("div",null,(0,s.zw)(e.name),1),(0,n._)("div",null,"餘額： $ "+(0,s.zw)(e.deposit),1)]),(0,n._)("button",{class:"btn",type:"button","data-bs-toggle":"collapse","data-bs-target":"#fund"+e._id,"aria-expanded":"false"},m,8,r)]),(0,n._)("div",{class:"collapse",id:"fund"+e._id},[h,(0,n._)("div",f,[_,(0,n._)("div",w,[(0,n._)("button",{class:"btn transparent-btn",onClick:(0,a.iM)((t=>M.openModal(!1,"fund",e)),["prevent"])},v,8,g),(0,n._)("button",{class:"btn transparent-btn",onClick:(0,a.iM)((t=>M.openDeleteModal(e)),["prevent"])},D,8,F)])])],8,b)])))),128)),k,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(y.credit_cards,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"m-3 p-3 fund-info",key:"credit_card"+e._id},[(0,n._)("div",C,[(0,n._)("div",$,[(0,n._)("div",null,(0,s.zw)(e.name),1),(0,n._)("div",null,"累積消費： $ "+(0,s.zw)(e.limit),1)]),(0,n._)("button",{class:"btn",type:"button","data-bs-toggle":"collapse","data-bs-target":"#credit_card"+e._id,"aria-expanded":"false"},j,8,x)]),(0,n._)("div",{class:"collapse",id:"credit_card"+e._id},[L,(0,n._)("div",N,[U,(0,n._)("div",H,[(0,n._)("button",{class:"btn transparent-btn",onClick:(0,a.iM)((t=>M.openModal(!1,"credit-card",e)),["prevent"])},Y,8,V),(0,n._)("button",{class:"btn transparent-btn",onClick:(0,a.iM)((t=>M.openDeleteModal(e)),["prevent"])},q,8,Z)])])],8,z)])))),128))])]),(0,n.Wm)(W,{ref:"fundModal",fund:y.tempFund,onUpdateFund:M.updateFund},null,8,["fund","onUpdateFund"]),(0,n.Wm)(K,{ref:"deleteModal",name:y.tempFund.name},null,8,["name"])],64)}const B={class:"modal ledger-modal",tabindex:"-1",ref:"modal"},E={class:"modal-dialog modal-md modal-dialog-centered"},G={class:"modal-content"},J=(0,n._)("div",{class:"modal-header"},[(0,n._)("h5",{class:"modal-title"},"新增帳戶"),(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),O={class:"modal-body"},P={class:"row"},Q={class:""},R={class:"mb-3"},S=(0,n._)("label",{for:"type",class:"form-label"},"帳戶類型",-1),T=(0,n._)("option",{value:"fund",selected:""},"帳戶",-1),X=(0,n._)("option",{value:"credit-card"},"信用卡",-1),ee=[T,X],te={class:"mb-3"},de={key:0,for:"name",class:"form-label"},ne={key:1,for:"name",class:"form-label"},ae={class:"mb-3"},se=(0,n._)("label",{for:"amount",class:"form-label"},"帳戶金額",-1),le={class:"modal-footer"},ie=(0,n._)("button",{type:"button",class:"btn gray-btn","data-bs-dismiss":"modal"},"取消",-1);function oe(e,t,d,s,l,i){return(0,n.wg)(),(0,n.iD)("div",B,[(0,n._)("div",E,[(0,n._)("div",G,[J,(0,n._)("div",O,[(0,n._)("div",P,[(0,n._)("div",Q,[(0,n._)("div",R,[S,(0,n.wy)((0,n._)("select",{id:"type",class:"form-select","aria-label":"type","onUpdate:modelValue":t[0]||(t[0]=e=>l.tempFund.type=e)},ee,512),[[a.bM,l.tempFund.type]])]),(0,n._)("div",te,["fund"===l.type?((0,n.wg)(),(0,n.iD)("label",de,"帳戶名稱")):((0,n.wg)(),(0,n.iD)("label",ne,"信用卡名稱")),(0,n.wy)((0,n._)("input",{id:"name",type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>l.tempFund.name=e)},null,512),[[a.nr,l.tempFund.name]])]),(0,n._)("div",ae,[se,(0,n.wy)((0,n._)("input",{for:"amount",type:"number",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>l.tempFund.deposit=e)},null,512),[[a.nr,l.tempFund.deposit]])])])])]),(0,n._)("div",le,[ie,(0,n._)("button",{type:"button",class:"btn blue-btn",onClick:t[3]||(t[3]=t=>e.$emit("update-fund",l.tempFund))},"新增")])])])],512)}var ce=d(7972),ue=d.n(ce),re={props:{fund:{}},data(){return{modal:{},tempFund:{},type:"fund"}},watch:{fund(){this.tempFund=this.fund},tempFund(){console.log("now type:",this.type),"credit-card"===this.tempFund.type&&(this.type="credit-card")}},methods:{showModal(){this.modal.show()},hideModal(){this.modal.hide()}},mounted(){this.modal=new(ue())(this.$refs.modal)}},pe=d(89);const me=(0,pe.Z)(re,[["render",oe]]);var be=me,he=d(4010),fe={data(){return{funds:{},credit_cards:{},isNew:!1,tempFund:{},isLoading:!1}},components:{FundModal:be,DeleteModal:he.Z},methods:{getFunds(){const e=`https://wide-eyed-sneakers-newt.cyclic.app/api/fund/${this.$route.params.ledgerId}`;this.$http.get(e).then((e=>{console.log("funds:",e.data),this.funds=e.data}))},getCreditCard(){const e=`https://wide-eyed-sneakers-newt.cyclic.app/api/credit-card/${this.$route.params.ledgerId}`;this.$http.get(e).then((e=>{console.log("credit-cards:",e.data),this.credit_cards=e.data}))},openModal(e,t,d){e?this.tempFund={}:(console.log("detail:",d),this.tempFund={...d},this.tempFund.type=t,"credit-card"===t&&(this.tempFund.deposit=d.limit)),this.isNew=e,this.$refs.fundModal.showModal()},updateFund(e){this.isLoading=!0,this.tempFund={ledgerId:this.$route.params.ledgerId,name:e.name,deposit:e.deposit};let t="https://wide-eyed-sneakers-newt.cyclic.app/api/fund/create",d="post";this.isNew||"fund"!==e.type||(t="https://wide-eyed-sneakers-newt.cyclic.app/api/fund/update",d="patch",this.tempFund.fundId=e._id),this.isNew&&"credit-card"===e.type&&(t="https://wide-eyed-sneakers-newt.cyclic.app/api/credit-card/create",this.tempFund={ledgerId:this.$route.params.ledgerId,name:e.name,limit:e.deposit,statementClosingDate:new Date(Date.now()),dueDate:new Date(Date.now())}),this.isNew||"credit-card"!==e.type||(t="https://wide-eyed-sneakers-newt.cyclic.app/api/credit-card/update",d="patch",this.tempFund={ledgerId:this.$route.params.ledgerId,creditCardId:e._id,name:e.name,limit:e.deposit,statementClosingDate:new Date(Date.now()),dueDate:new Date(Date.now())}),this.$http[d](t,this.tempFund).then((e=>{this.isLoading=!1,console.log(e.data),this.$refs.fundModal.hideModal(),this.getFunds(),this.getCreditCard()}))},openDeleteModal(e){this.tempFund={...e},this.$refs.deleteModal.showModal()}},created(){this.getFunds(),this.getCreditCard()}};const _e=(0,pe.Z)(fe,[["render",A]]);var we=_e}}]);
//# sourceMappingURL=733.b2dcb27a.js.map